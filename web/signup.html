<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>大连高校环境联盟</title>

    <link rel="stylesheet" href="css/hv.css" type="text/css">
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
   
    <script src="js/sign-up-in.js"></script>
    <script src="js/jquery-1.12.4.min.js"></script>
   
</head>

<body clss="ground" style="background-image: url("http://dasai.lanqiao.cn/dasai/images/login/register-bg.jpg") no-repeat">
<div class="logo">
    <a href="introduction.html"><img src="images/logo_title.png"></a>
</div>
<div class="signUp">
    <div class="a-title">槐盟网注册</div>
    <div class="form">
        <form>
         <div class="show-line">
                <input type="text" id="account" name="account" placeholder="请输入用户名" onblur="checkAccount(this)" data-rule="" autocomplete="off">
            </div>
            <div class="check-result" id="statu_account" >
            </div>
            <div class="show-line">
                <input type="text" id="email" name="email" placeholder="请输入邮箱" onblur="checkMail(this)" data-rule="" autocomplete="off">
            </div>
            <div class="check-result" id="check_mail" >
            </div>
            <div class="show-line">
            <input type="password" id="pwd1" name="pwd1" placeholder="密码长度6-12位，为字母数字"  onchange="checkPsw(this)" autocomplete="off">
            </div>
            <div class="check-result" id="statu_pwd1">
            </div>
            <div class="show-line">
            <input type="password" id="pwd2" name="pwd2" placeholder="请再次输入密码" onkeyup ="validate()" autocomplete="off">
            <div class="check-result" id="statu_pwd2">
            </div> 
            </div>
            <button type="button" class="submit" id="sign-up-button">立即注册</button>
        </form>
    </div>
</div>

</body>
 <script>
$(document).ready(function(){
    $('#sign-up-button').click(function(){ 
            var reEmail=/^\w+((-\w+)丨(\.\w+))*\@[A-Za-z0-9]+(\.丨-)*[A-Za-z0-9]+\.[A-Za-z0-9]+$/;
            if(!reEmail.test($('#email').val())){ 
                if($('#email').val().length==0){
                    alert("邮箱不能为空")
                }
                else{
                    alert("邮箱格式有误") 
                }
                return;
            }

            var Acocunt=$('#account').val();
            if(Acocunt.length==0||Acocunt.length>20){ 
                if(Acocunt.length==0){
                    alert("用户名不能为空")
                }else{
                    alert("用户名长度超过20") 
                }
                return;
            }

            var rePwd=/[A-Za-z0-9\.\_]{6,12}/;
            if(!rePwd.test($('#pwd1').val())){ 
                if($('#pwd1').val().length==0){
                    alert("密码不能为空")
                }
                else{
                    alert("密码格式有误") 
                }
                return;
            }
          var pwd1=$('#pwd1').val();
          var pwd2=$('#pwd2').val();
          if(pwd1!=pwd2){
            alert("两次密码输入不一致");
            return;
          }
          $.ajax({
            type: 'post',
            url: 'user/register',
            data: {
                username: $('#account').val(),
                email: $('#email').val(),
                password: $('#pwd1').val()
            },
            success:function(result){
               alert(result.message);
            },
            fail:function(){
                alert("failed");
            },
            error:function(response){
                alert("shenhongfei error!!!");
            }
          });
        // alert("为什么要加上这一句，才能显示访问记录")
    });        
})



</script>
</html>